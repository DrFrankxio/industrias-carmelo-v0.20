/**
* @author mrdoob / http://mrdoob.com/
* @author Mugen87 / https://github.com/Mugen87
*/

// Rewriten by Slender303YT

let PI2=Math.PI/2;THREE.PointerLockControls=function(e,t,o){undefined===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1;let n=new THREE.Euler(0,0,0,"YXZ"),i,r,s={type:"change"},c={type:"unlock"},m={type:"lock"},a=.002*o,d=new THREE.Vector3,h=t=>{!1!==this.isLocked&&(i=t.movementX||t.mozMovementX||t.webkitMovementX||0*o,r=t.movementY||t.mozMovementY||t.webkitMovementY||0*o,n.setFromQuaternion(e.quaternion),n.y-=i*a,n.x=Math.max(-PI2,Math.min(PI2,n.x-=r*a)),e.quaternion.setFromEuler(n),this.dispatchEvent(s))},l=e=>{document.pointerLockElement===t?(this.dispatchEvent(m),this.isLocked=!0):(this.dispatchEvent(c),this.isLocked=!1)},p=e=>console.error("THREE.PointerLockControls: Unable to use Pointer Lock API");this.connect=e=>{document.addEventListener("mousemove",h,!1),document.addEventListener("pointerlockchange",l,!1),document.addEventListener("pointerlockerror",p,!1)},this.disconnect=e=>{document.removeEventListener("mousemove",h,!1),document.removeEventListener("pointerlockchange",l,!1),document.removeEventListener("pointerlockerror",p,!1)},this.dispose=e=>this.disconnect(),this.moveForward=t=>{d.setFromMatrixColumn(e.matrix,0),d.crossVectors(e.up,d),e.position.addScaledVector(d,t)},this.moveRight=t=>{d.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(d,t)},this.getObject=t=>e,this.getDirection=t=>t=>d.copy(new THREE.Vector3(0,0,-1)).applyQuaternion(e.quaternion),this.lock=e=>t.requestPointerLock(),this.unlock=e=>document.exitPointerLock(),this.setSensitivity=e=>a=.002*e,this.connect()},THREE.PointerLockControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.PointerLockControls.prototype.constructor=THREE.PointerLockControls;